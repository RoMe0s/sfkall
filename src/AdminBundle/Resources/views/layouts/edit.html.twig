{% extends '@AdminBundle/Resources/views/layouts/base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('bundles/admin/css/plugins/summernote/summernote.css') }}" rel="stylesheet">
    <link href="{{ asset('bundles/admin/css/plugins/summernote/summernote-bs3.css') }}" rel="stylesheet">

    <link href="{{ asset('bundles/admin/css/plugins/datapicker/datepicker3.css') }}" rel="stylesheet">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('bundles/admin/js/plugins/summernote/summernote.min.js') }}"></script>
    <script src="{{ asset('bundles/admin/js/plugins/datapicker/bootstrap-datepicker.js') }}"></script>
    <script>
        $(document).ready(function(){

            $('.summernote').summernote();

            $('.input-group.date').datepicker({
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                calendarWeeks: true,
                autoclose: true
            });

        });
    </script>
        <script>
            $(document).ready(function(){

                $("#form-checker").find('form').on('submit', function(e){
                    var _firstErr = null;
                    $(this).find('div.required').each(function() {
                       if($(this).find('.form-control').val().length == 0) {
                           _firstErr = _firstErr == null ? $(this).find('.form-control') : _firstErr;
                           $(this).addClass('has-error');
                       }
                    });
                    if(_firstErr != null) {
                        _firstErr.focus();
                        _firstErr.closest('.tabs-container').find('.nav-tabs').find('li.active').addClass('tab-with-error');
                        return e.preventDefault();
                    }
                });

                $(document).on("click", ".form-group.has-error .form-control", function(e) {
                    $(this).closest("div.form-group").removeClass("has-error");
                    $(this).closest('.tabs-container').find('.nav-tabs').find('li.tab-with-error').removeClass('tab-with-error');
                });

            });
        </script>
{% endblock %}